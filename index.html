<!DOCTYPE html>
<html>


<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Web Notifications</title>
    <style>
        /* Scroll past image code from https://www.w3schools.com/howto/howto_css_parallax.asp */
        .imageBackground {
            background-image: url("https://d24oheizjk2k1o.cloudfront.net/wp-content/uploads/2016/10/26190652/The-Difference-Between-Email-and-Web-Push-Notifications.jpg");
            height: 400px;
            min-height: 150px;
            line-height: 20px;
            background-attachment: fixed;
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
        }
        .title {
            color: #FFFDD0;
            font-size: 56px;
            font-weight: bold;
            font-family: sans-serif;
        }
        .step {
            font-size: 16px;
            font-weight: bold;
            text-decoration: underline;
        }
        body {
            background: #FFFDD0;
            margin: 0px;
        }
        td {
            text-align: center;
        }
    </style>
    <script src="notifications.js" defer></script>
    <script>
        if(navigator.serviceWorker) {
            navigator.serviceWorker.register('sw.js');
        }
    </script>
</head>

<body>
    <div id="app">
        <div class="imageBackground" id="header">
            <div style="position: fixed; padding-left: 3%; padding-top: 100px ">
                <a class="title">Web Notifications</a>
            </div>
            <div  style="position: fixed; z-index:0; padding-left: 73%; padding-top: 75px">
                <table>
                    <tr>
                        <td><a class="title" style="font-size: 24px">Charles Jeffries</a> </td>
                    </tr>
                    <tr>
                        <td><a class="title" style="font-size: 24px">Sakan Pengdis</a> </td>
                    </tr>
                    <tr>
                        <td><a class="title" style="font-size: 24px">Joshua Zimmerling</a> </td>
                    </tr>
                </table>
            </div>
        </div>
        <div style="margin: 0% 15%; position: absolute; z-index:1" id="mainBody">
            <a id="table-of-contents">
                <h2>Table of Contents</h2>
                <ol>
                    <li><a href="#learning-outcomes">Learning Outcomes</a></li>
                    <li>
                        <a href="#learning-activites">Learning Activities</a>
                        <ul>
                            <li>
                                <a href="#basic-web-notifications">Basic Web Notifications</a>
                                <ul>
                                    <li><a href="#step1">Step 1: Set-up</a></li>
                                    <li><a href="#step2">Step 2: Asking for permission</a></li>
                                    <li><a href="#step3">Step 3: Creating our notification</a></li>
                                    <li><a href="#step4">Step 4: Adding to our notification</a></li>
                                    <li><a href="#step5">Step 5: Handling clicks</a></li>
                                </ul>
                            </li>
                            <li><a href="#handling-user-input">Handling User Input</a></li>
                            <li><a href="#cloud-notifications">Cloud Notifications</a></li>
                        </ul>
                    </li>
                    <li><a href="#standards">Standards</a></li>
                    <li><a href="#history">History</a></li>
                    <li><a href="#our-opinion">Our Opinion</a></li>
                    <li><a href="#reference-list">Reference List</a></li>
                    <li><a href="#resource-list">Resource List</a></li>
                </ol>
            </a>
            <a id="learning-outcomes">
                <h2>Learning Outcomes</h2>
                <ul>
                    <li>Learn how to make a basic web notification</li>
                    <li>Handling user input in web notifications</li>
                    <li>Cloud notification providers</li>
                </ul>
            </a>
            <a id="learning-activities">
                <h2>Learning Activities</h2>
                <h3 id="basic-web-notifications">Basic Web Notifications</h3>
                <p>
                    Modern browsers have begun including the Notifications API to allow developers an easy way to create basic
                    web push notifications. In this section, we will walk through the steps on how to create and handle a
                    notification.
                </p>

                <p>
                    <div id="step1" class="step">Step 1: Set-up</div>
                    To set-up for our tutorial, we are going to start with 2 seperate files:
                    <ul>
                        <li>index.html</li>
                        <li>notifications.js</li>
                    </ul>
                    Inside of index.html, we are going to put this starter code that just lays out some buttons:
                    <pre>
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;script src="notifications.js" defer&gt;&lt;/script&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div id="headerText"&gt; Let's Make a Notification! &lt;/div&gt;
        &lt;input id="permissionButton" type="button" value="Click for permission"&gt;
        &lt;input id="notificationButton" type="button" value="Click for a push notification"&gt;
    &lt;/body&gt;
&lt;/html&gt;</pre>
                    Opening this file in our browser we get a webpage that looks like this:<br />
                    <img style="border:solid" src="https://raw.githubusercontent.com/ASUpengdis/421Project/main/tutorial/_sample_index_init-screenshot.png" /> <br /><br />
                    Inside of notifications.js, we want to grab a reference to these elements so that we can use them later
                    <pre>
let header = document.getElementById("headerText");
let permButton = document.getElementById("permissionButton");
let notifButton = document.getElementById("notificationButton");</pre>
                </p>

                <p>
                    <div id="step2" class="step">Step 2: Asking for permission</div>
                    Before sending any notification, you need to ask the user if they will allow your page to send push
                    notifications [1]. This is done using the requestPermission() function in a promise to wait for the response.
                    We will add this promise in a listener for our permissionButton, and the result will be stored into
                    Notifications.permission.
                    <pre>
permButton.addEventListener('click', () => {
    let promise = Notification.requestPermission().then((result) => {
        console.log(result);
    });
});</pre>
                    Now, once we click on the button, a pop-up will appear asking for permission to send notifications.
                    Depending on the user's response, the possible values stored can be 'granted', 'denied',
                    or 'default'.<br />
                    <img style="border:solid" src="https://raw.githubusercontent.com/ASUpengdis/421Project/main/tutorial/_sample_index_perm-screenshot.png" /> <br />
                    <input id="permButton" type="button" value="Click here for permission pop-up">
                    Here is an example of what that would look like.
                </p>

                <p>
                    <div id="step3" class="step">Step 3: Creating our notification</div>
                    Once we have asked the user for permission to send them notifications, we need to know how to be able
                    to send them some. Our first step will be to create a Notification object that has two parameters, the Name
                    and the Properties. We will start off leaving the properites field empty, but we will come back and address
                    it later. Here is the code to create a notification:
                    <pre>
const notif = new Notification('Our new notification', {});</pre>
                    This creates a new notification, but we currently have no way of triggering this notification to appear. Let's
                    add a listener to this code to connect it to our button.
                    <pre>
notifButton.addEventListener('click', () => {
    const notif = new Notification('Our new notification', {});
});</pre>
                    Unfortunately, notifications are not able to show from just a local file and requires a hosted website that
                    uses HTTPS to ensure the notification is sent securely. Because of this, our index.html file will not be able
                    to display a notification unless you are able to host it somewhere like github pages. However to see what it
                    would look like, press the button below.<br />
                    <input id="baseNotif" type="button" value="Click here for a notification"><br /><br />
                    Depending on whether or not you gave us permission to send notifications, you may or may not have actually seen
                    a notification there. But how did we do that? Before pushing the notification, you should include a check on the
                    Notification.permission that we got from asking permission in Step 2. Here is how we did it:
                    <pre>
notifButton.addEventListener('click', () => {
    if (Notification.permission === "granted") {
        const notif = new Notification('Our new notification', {});
    }
});</pre>
                </p>
                <p>
                    <div id="step4" class="step">Step 4: Adding to our notification</div>
                    Now that we know how to make a notification, lets learn how to add some new parts into our notification. We will
                    be focusing on the 'body' and the 'icon' elements however there are many more options you can read up on
                    <a href="https://developer.mozilla.org/en-US/docs/Web/API/notification#instance_properties" target="_blank">here</a> [2].
                    The body element lets us set a more detailed message to be displayed within our push notification, and the icon
                    element allows us to attatch an image that should be based on the notification or we can use for our logo. Here
                    is how we implement it:
                    <pre>
notifButton.addEventListener('click', () => {
    if (Notification.permission === "granted") {
        const notif = new Notification('Our new notification',
            {
                icon: "https://cdn-icons-png.flaticon.com/512/2431/2431996.png",
                body: "A more detailed message about our notification"
            });
    }
});</pre>
                    To see how our notification has changed, press the button below.<br />
                    <input id="decoratedNotif" type="button" value="Click here for a more detailed notification"><br />
                </p>
                <p>
                    <div id="step5" class="step">Step 5: Handling clicks</div>
                    We are almost through the basic notifications, the last thing that we need to be able to do is to have our
                    application respond to the user clicking on the notification. We can make this happen by adding an event listener
                    to our pre-existing notification object, and having it listen for a click. Here is how to do that in code:
                    <pre>
notifButton.addEventListener('click', () => {
    if (Notification.permission === "granted") {
        const notif = new Notification('Our new notification',
            {
                icon: "https://cdn-icons-png.flaticon.com/512/2431/2431996.png",
                body: "A more detailed message about our notification"
            });
        notif.addEventListener("click", () => {
            document.getElementById("headerText").innerText = "You clicked on the notification!";
        });
    }
});</pre>
                    By adding this event listener to our button, whenever the notification is clicked on we can make changes accordingly. 
                    In our example, this just changes the text on our screen to display that we clicked on the notification. Below is an 
                    interactive example that tracks the amount of times you have clicked directly on this notification. <br /><br />
                    <div id="headerText">You clicked on the notification 0 times!</div>
                    <input id="responsiveNotif" type="button" value="Click here for a responsive notification">
                </p>

                <h3 id="handling-user-input">Handling User Input</h3>

                <div id="inputDiv" style="background:white; border: 1px solid black">This color will change based on your input</div>
                <br>
                <input id="btn3" type="button" value="Click here for a persistent notification with buttons">

                <h3 id="cloud-notifications">Cloud Notifications</h3>
                <p>
                    For remote notifications through the cloud, we can use <a href="https://firebase.google.com/">Google Firebase</a>.
                </p>

                <div id="step1" class="step">Step 1: Create a Firebase Project</div>
                <p>
                    First, sign up or log in and click "Go to Console" <br>
                    <img style="border:solid" src="Assets/firebase/firebase_login.png"> <br>
                </p>
                <p>
                    Next, create a new project.<br>
                    <img style="border:solid" src="Assets/firebase/firebase_add_project.png"> <br>
                </p>
                <p>
                    Enter a name for the project. For this tutorial, we're going to call it "notifications-tutorial". <br>
                    <img style="border:solid" src="Assets/firebase/firebase_add_project_2.png"> <br>
                </p>
                <p>
                    When prompted about Google Analytics, select no. <br>
                    <img style="border:solid" src="Assets/firebase/firebase_add_project_3.png"> <br>
                </p>
                <p>
                    Click "Create Project", and wait for Firebase to create your project for you. This may take several minutes.
                </p>

                <div id="step1" class="step">Step 2: Register a Webapp</div>
                <p>
                    After creating the Firebase project, you should be on the project's dashboard. Click the Webapp icon
                    to register a webapp with your firebase project.<br>
                    <img style="border:solid" src="Assets/firebase/project_dashboard.png"> <br>
                </p>
                <p>
                    Enter a nickname for the webapp. For this tutorial we'll use "notification-tutorial-webapp". You can
                    also at this point choose to setup firebase hosting for your website, but for this tutorial we're
                    going to assume you are hosting your website elsewhere.<br>
                    Click "Register app".<br>
                    <img style="border:solid" src="Assets/firebase/setup_webapp.png"> <br>
                </p>
                <p>
                    Select "Use a &ltscript&gt tag" instead of "Use npm". This allows us to make a simple standalone webapp
                    that uses the Firebase API rather than depending on Node JS packages. You will be shown an html script
                    element that imports the Firebase API and initializes the app with your authentication keys. <b>Your
                    <code>firebaseConfig</code> will be unique to your webapp, so make sure you hold on to it and use it
                    when appropriate.</b> Copy this text to your clipboard.<br>
                    <img style="border:solid" src="Assets/firebase/setup_webapp_2.png"> <br>
                </p>
                <p>
                    Paste the script element into your html file from earlier.<br></p>
                <pre>
                    <code>
&lt!DOCTYPE html>
&lthtml>
&lthead>
    &ltscript src="_sample_notifications.js" defer>&lt/script>
&lt/head>
&ltbody>
    &ltscript type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.14.0/firebase-app.js";
        // TODO: Add SDKs for Firebase products that you want to use
        // https://firebase.google.com/docs/web/setup#available-libraries

        // Your web app's Firebase configuration
        const firebaseConfig = {
            //YOUR FIREBASE CONFIG HERE
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
    &lt/script>
    &ltdiv id="headerText"> Let's Make a Notification! &lt/div>
    &ltinput id="permissionButton" type="button" value="Click for permission">
    &ltinput id="notificationButton" type="button" value="Click for a push notification">
&lt/body>
&lt/html>
                    </code>
                </pre>
                <p>
                    Next, we import the Firebase messaging API and get a <code>messaging</code> object that allows us to
                    register out client with Firebase to be able to receive messages.
                </p>




            </a>
            <a id="standards">
                <h2>Standards</h2>
                <p>
                    The main standard for push notifications is requesting permission from the user to allow your website to send 
                    notifications. MDN outlines that "Before an app can send a notification, the user must grant the application the 
                    right to do so" [1]. Furthermore, they discuss how push notifications had been abused in the past and that one
                    of the new countermeasures against that is to only request permission after the user gestures in some way that 
                    they may want these notifications, for example, clicking a button that says 'Keep Me Notified'. Once permission 
                    has been asked for, every notification should check to ensure that the current permission status is 'granted'.
                </p>
            </a>
            <a id="history">
                <h2>History</h2>
                <p>
                    Web push notifications are a relatively new innovation to the web development scene, making their history
                    not span a very long way back in time. The first predecessor to notifications through the web is email communication
                    in which websites and companies can send mass emails to all of their users giving an update on whatever it is they
                    desire. In their article What are Push Notificiations - The Ultimate Guide, Gravitec states that "In 2001, RIM created
                    the first email alert system" [3]. This was the first appearance of any type of push notification system, and started
                    out as a functionality for the email app that was only on blackberry phones. Todd Grennan highlights that web push
                    stems off of the idea of mobile push, which originated back in 2009 with the rise of smart phones, however historically
                    web notifications have had a much harder time of being widely used and accepted. This reluctance of integration mainly
                    comes from users not trusting web notifications as much as mobile push notifications, causing a large percent of
                    people to decline websites the permissions necessary [4]. The first addition of web push notifications to browsers 
                    came in 2014 as Google added this functionality into Google Chrome. Slowly, thoroughout the next 4 years or so browsers
                    such as Opera, Firefox, Safari, and Edge begin to support this functionality [5].
                </p>
            </a>
            <a id="our-opinion">
                <h2>Our Opinion</h2>
                <p>
                    As technology becomes more and more integrated into everyones daily life, more and more users will begin getting 
                    comfortable with the conceptof web push and help it to grow into a mainstream feature on many websites. We think that 
                    this is overall a positive for both web developers and web users. On the side of the web devs, push notifications help 
                    to retain visitors and keep people coming back to your site, as well as providing a distinct advantage to marketing by 
                    allowing you direct access to the customers [6]. These benefits can lead to more revenue on your site and help to 
                    push your site more into the mainstream attention. As for the web users, more websites utilizing push notifications can 
                    help to build you a more customized experience on the website, "based on both [your] own preferences as well as 
                    historical click behaviour" [6]. With this, users will see more of the content that they would like to see and have it 
                    all delivered directly to them through notifications.
                </p>
            </a>
            <a id="reference-list">
                <h2>Reference List</h2>
                <ul>
                    <li>
                        [1]
                        <a href="https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API/Using_the_Notifications_API" target="_blank">
                            MDN. Using the notifications API. Web APIs | MDN. Last retrieved November 17, 2022, <br />
                            from https://developer.mozilla.org/en-US/docs/Web/API/Notifications_API/Using_the_Notifications_API

                        </a>
                    </li>
                    <li>
                        [2]
                        <a href="https://developer.mozilla.org/en-US/docs/Web/API/notification#instance_properties" target="_blank">
                            MDN. Notification. Web APIs | MDN. Last retrieved November 17, 2022, <br />
                            from https://developer.mozilla.org/en-US/docs/Web/API/notification#instance_properties

                        </a>
                    </li>
                    <li>
                        [3]
                        <a href="https://gravitec.net/blog/what-are-push-notifications/" target="_blank">
                            Gravitec. (2019, May 4). What are Push Notifications - The Ultimate Guide. Gravitec. <br />
                            Last retrieved November 16, 2022, from https://gravitec.net/blog/what-are-push-notifications/
                        </a>
                    </li>
                    <li>
                        [4]
                        <a href="https://www.braze.com/resources/articles/behind-web-push-notifications" target="_blank">
                            Grennan, T. (2020, January 31). Behind web push notifications: All You Need To Know About Web Messaging's Secret Weapon'. Braze. <br />
                            Last retrieved November 15, 2022, from https://www.braze.com/resources/articles/behind-web-push-notifications
                        </a>
                    </li>
                    <li>
                        [5]
                        <a href="https://www.braze.com/resources/articles/behind-web-push-notifications-2" target="_blank">
                            Grennan, T. (2020, January 31). Behind web push notifications: History of web push. Braze. <br />
                            Last retrieved November 15, 2022, from https://www.braze.com/resources/articles/behind-web-push-notifications-2
                        </a>
                    </li>
                    <li>
                        [6]
                        <a href="https://freestar.com/web-push-notifications-benefits/" target="_blank">
                            Valdez, L. (2022, March 2). 5 Benefits of Web Push Notifications. Freestar. <br />
                            Last retrieved November 18, 2022, from https://freestar.com/web-push-notifications-benefits/
                        </a>
</li>
                </ul>
            </a>
            <a id="resource-list">
                <h2>Resource List</h2>
                <ul>
                    <li><a href="https://www.w3schools.com/howto/howto_css_parallax.asp" target="_blank">Stable Image Background Tutorial</a></li>
                    <li><a href="https://d24oheizjk2k1o.cloudfront.net/wp-content/uploads/2016/10/26190652/The-Difference-Between-Email-and-Web-Push-Notifications.jpg" target="_blank">Background Image</a></li>
                    <li><a href="https://notifications.spec.whatwg.org/#using-actions" target="_blank">Notifications API Research</a></li>
                    <li><a href="https://whatwebcando.today/local-notifications.html" target="_blank">Persistent Notifications</a></li>
                </ul>
            </a>
        </div>
    </div>

    <!-- <script src="https://unpkg.com/vue@3"></script>
    <script>
        let app = Vue.createApp({
            data() {
                return {

                }
            },
            methods: {

            },
            mounted: function () {

            },
        }).mount('#app')
    </script> -->
</body>


</html>
